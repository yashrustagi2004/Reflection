<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Account - AI Interview Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #6B46C1 0%, #7C3AED 25%, #8B5CF6 50%, #4C9FE8 75%, #5BC0DE 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 500px;
            width: 90%;
            margin: 0 auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .warning-icon {
            width: 80px;
            height: 80px;
            background: #dc3545;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 36px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: 700;
        }

        .warning-text {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.6;
        }

        .consequences {
            background: rgba(220, 53, 69, 0.1);
            border: 2px solid rgba(220, 53, 69, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .consequences h3 {
            color: #dc3545;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .consequences ul {
            list-style: none;
            padding: 0;
        }

        .consequences li {
            color: #666;
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .consequences li::before {
            content: '⚠️';
            position: absolute;
            left: 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #333;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #dc3545;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
        }

        .checkbox-group label {
            color: #666;
            font-size: 14px;
            line-height: 1.4;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn-danger:hover:not(:disabled) {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
        }

        .btn-danger:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            width: 100%;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .message {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .message.error {
            background: #fee;
            color: #c33;
            border: 1px solid #fcc;
        }

        .confirmation-box {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .confirmation-box p {
            color: #856404;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .confirmation-phrase {
            font-weight: 600;
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="warning-icon">⚠️</div>
        
        <h1>Delete Account</h1>
        
        <p class="warning-text">
            This action cannot be undone. This will permanently delete your account and remove all associated data from our servers.
        </p>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="message {{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="consequences">
            <h3>What will be deleted:</h3>
            <ul>
                <li>Your profile and account information</li>
                <li>All uploaded resumes and job descriptions</li>
                <li>Interview practice history and feedback</li>
                <li>Account settings and preferences</li>
                <li>All associated files and data</li>
            </ul>
        </div>

        <form method="POST">
            <div class="confirmation-box">
                <p>Please type <span class="confirmation-phrase">delete my account</span> in the box below to confirm:</p>
                <input type="text" id="confirmation" name="confirmation" class="form-control" 
                       placeholder="Type: delete my account" required>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="permanent_delete" name="permanent_delete">
                <label for="permanent_delete">
                    <strong>Permanent deletion:</strong> Check this box if you want to permanently delete all data immediately. 
                    If unchecked, your account will be deactivated and data will be kept for 30 days in case you change your mind.
                </label>
            </div>

            <button type="submit" id="deleteBtn" class="btn btn-danger" disabled>
                Delete My Account
            </button>
            
            <a href="{{ url_for('profile') }}" class="btn btn-secondary">Cancel</a>
        </form>
    </div>

    <script>
        // Enable delete button only when confirmation text is correct
        const confirmationInput = document.getElementById('confirmation');
        const deleteBtn = document.getElementById('deleteBtn');

        confirmationInput.addEventListener('input', function() {
            if (this.value.toLowerCase() === 'delete my account') {
                deleteBtn.disabled = false;
            } else {
                deleteBtn.disabled = true;
            }
        });

        // Add extra confirmation before form submission
        document.querySelector('form').addEventListener('submit', function(e) {
            const isPermanent = document.getElementById('permanent_delete').checked;
            const deleteType = isPermanent ? 'permanently delete' : 'deactivate';
            
            if (!confirm(`Are you absolutely sure you want to ${deleteType} your account? This action cannot be undone.`)) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>